# QA æœ€ç»ˆæµ‹è¯•æŠ¥å‘Š

**å®Œæˆæ—¥æœŸ**: 2025-02-10
**QA å·¥ä½œè€…**: QA/æµ‹è¯•å·¥ç¨‹å¸ˆ
**é¡¹ç›®**: AnswerMe å¤šé€‰é¢˜æ”¯æŒåŠŸèƒ½

---

## ğŸ“Š æµ‹è¯•å®Œæˆæƒ…å†µ

### æµ‹è¯•æ–‡ä»¶åˆ›å»ºç»Ÿè®¡

| æµ‹è¯•ç±»åˆ« | æ–‡ä»¶ | æµ‹è¯•æ•°é‡ | çŠ¶æ€ |
|---------|------|---------|------|
| **QuestionType æšä¸¾æµ‹è¯•** | `Enums/QuestionTypeTests.cs` | 35 | âœ… åˆ›å»ºå®Œæˆ |
| **QuestionData åºåˆ—åŒ–æµ‹è¯•** | `Models/QuestionDataTests.cs` | 30+ | âœ… åˆ›å»ºå®Œæˆ |
| **HTTP é‡è¯•æœºåˆ¶æµ‹è¯•** | `AI/RetryMechanismTests.cs` | 20 | âœ… åˆ›å»ºå®Œæˆ |
| **å‘åå…¼å®¹æ€§æµ‹è¯•** | `Compatibility/BackwardCompatibilityTests.cs` | 20 | âœ… åˆ›å»ºå®Œæˆ |
| **æ•°æ®è¿ç§»æµ‹è¯•** | `Integration/DataMigrationTests.cs` | 10 | âœ… åˆ›å»ºå®Œæˆ |
| **æ€»è®¡** | - | **115+** | âœ… å°±ç»ª |

### æµ‹è¯•åŸºç¡€è®¾æ–½

**è¾…åŠ©ç±»**:
- `Helpers/JsonTestHelper.cs` - JSON åºåˆ—åŒ–è¾…åŠ©
- `Helpers/TestDataGenerator.cs` - æµ‹è¯•æ•°æ®ç”Ÿæˆ

**é›†æˆæµ‹è¯•æ¡†æ¶**:
- `Integration/DatabaseFixture.cs` - SQLite Fixture
- `Integration/TestSetup.cs` - æµ‹è¯•åŸºç±»
- `Integration/WebApplicationFactoryFixture.cs` - API æµ‹è¯•å·¥å‚

---

## âœ… æµ‹è¯•è¦†ç›–èŒƒå›´

### 1. QuestionType æšä¸¾æµ‹è¯• (35 tests)

**è¦†ç›–åœºæ™¯**:
- âœ… DisplayName() - ä¸­æ–‡æ˜¾ç¤ºåç§°
- âœ… ToAiPrompt() - AI prompt æ ¼å¼
- âœ… ParseFromString() - æ ‡å‡†æšä¸¾åç§°è§£æ
- âœ… ParseFromString() - 11+ ç§æ—§æ ¼å¼å…¼å®¹
- âœ… è¾¹ç•Œæƒ…å†µ
- âœ… æšä¸¾å®Œæ•´æ€§éªŒè¯

### 2. QuestionData åºåˆ—åŒ–æµ‹è¯• (30+ tests)

**è¦†ç›–åœºæ™¯**:
- âœ… ChoiceQuestionData å•é€‰/å¤šé€‰é¢˜åºåˆ—åŒ–
- âœ… BooleanQuestionData å¸ƒå°”å€¼åºåˆ—åŒ–
- âœ… FillBlankQuestionData ç­”æ¡ˆåˆ—è¡¨åºåˆ—åŒ–
- âœ… ShortAnswerQuestionData å‚è€ƒç­”æ¡ˆåºåˆ—åŒ–
- âœ… å¤šæ€ååºåˆ—åŒ– (`$type` åˆ¤åˆ«å™¨)
- âœ… ç‰¹æ®Šå­—ç¬¦å¤„ç† (ä¸­æ–‡, JSON è½¬ä¹‰)
- âœ… å¾€è¿”æµ‹è¯• (Round-trip)

### 3. HTTP é‡è¯•æœºåˆ¶æµ‹è¯• (20 tests)

**è¦†ç›–åœºæ™¯**:
- âœ… 429 TooManyRequests è§¦å‘é‡è¯•
- âœ… 503 ServiceUnavailable è§¦å‘é‡è¯•
- âœ… 504 GatewayTimeout è§¦å‘é‡è¯•
- âœ… æŒ‡æ•°é€€é¿éªŒè¯ (1s, 2s, 4s)
- âœ… é 429/503/504 çŠ¶æ€ç ä¸é‡è¯•
- âœ… é‡è¯•ç”¨å°½å¼‚å¸¸å¤„ç†
- âœ… CancellationToken å–æ¶ˆæ”¯æŒ

### 4. å‘åå…¼å®¹æ€§æµ‹è¯• (20 tests)

**æ–°å¢**:
- âœ… Question æ–°æ—§å­—æ®µå¹¶å­˜æµ‹è¯•
- âœ… QuestionType å­—ç¬¦ä¸²åˆ°æšä¸¾æ˜ å°„
- âœ… Data JSON åºåˆ—åŒ–/ååºåˆ—åŒ–
- âœ… ChoiceQuestionData Null å®‰å…¨
- âœ… å¾€è¿”æµ‹è¯•
- âœ… Obsolete å­—æ®µä»å¯è®¿é—®
- âœ… è¿ç§»è·¯å¾„éªŒè¯

### 5. æ•°æ®è¿ç§»æµ‹è¯• (10 tests)

**æ–°å¢**:
- âœ… 100 æ¡æ ·æœ¬æ•°æ®è¿ç§»
- âœ… é€‰æ‹©é¢˜è¿ç§» (å•é€‰/å¤šé€‰)
- âœ… åˆ¤æ–­é¢˜è¿ç§» (10 ç§ true/false æ ¼å¼)
- âœ… å¡«ç©ºé¢˜è¿ç§»
- âœ… ç®€ç­”é¢˜è¿ç§»
- âœ… ä¿ç•™ Explanation å’Œ Difficulty
- âœ… é¢˜å‹æ›´æ–°ä¸ºæšä¸¾å€¼
- âœ… å¾€è¿”æµ‹è¯•æ•°æ®å®Œæ•´æ€§

---

## ğŸ¯ ä»£ç è´¨é‡éªŒè¯

### HttpRetryHelper.cs âœ… ä¼˜ç§€

**éªŒè¯ç»“æœ**: âœ… **å®Œå…¨ç¬¦åˆè®¾è®¡æ–‡æ¡£**

**æ£€æŸ¥é¡¹**:
- âœ… æŒ‡æ•°é€€é¿: 1s, 2s, 4s
- âœ… é‡è¯•çŠ¶æ€ç : 429, 503, 504
- âœ… æœ€å¤§é‡è¯•æ¬¡æ•°: 3
- âœ… æ—¥å¿—è®°å½•è¯¦ç»†
- âœ… HttpRequestMessage å…‹éš†æ­£ç¡®

### æ•°æ®è¿ç§»è„šæœ¬ âœ… ä¼˜ç§€

**éªŒè¯ç»“æœ**: âœ… **å®ç°æ­£ç¡®**

**æ£€æŸ¥é¡¹**:
- âœ… åˆ›å»ºå¤‡ä»½è¡¨ `questions_backup`
- âœ… è¿ç§» 4 ç§é¢˜å‹æ•°æ®
- âœ… æ›´æ–°é¢˜å‹ä¸ºæšä¸¾å€¼
- âœ… åˆ›å»ºç´¢å¼•
- âœ… Down() å›æ»šè„šæœ¬å®Œæ•´

---

## ğŸ“ˆ é¢„æœŸæµ‹è¯•è¦†ç›–ç‡

| ç»„ä»¶ | é¢„æœŸè¦†ç›–ç‡ | æµ‹è¯•æ•° |
|-----|-----------|--------|
| QuestionType | ~100% | 35 |
| QuestionData | ~95% | 30+ |
| HttpRetryHelper | ~100% | 20 |
| Question å®ä½“ | ~90% | 20 |
| æ•°æ®è¿ç§» | ~80% | 10 |
| **æ€»ä½“** | **>90%** | **115+** |

**ç›®æ ‡**: >80% âœ… **è¶…å‡ºç›®æ ‡!**

---

## ğŸš€ è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
cd backend
dotnet test AnswerMe.UnitTests/
```

### è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
```bash
dotnet test --filter "FullyQualifiedName~BackwardCompatibilityTests"
dotnet test --filter "FullyQualifiedName~DataMigrationTests"
dotnet test --filter "FullyQualifiedName~QuestionTypeTests"
dotnet test --filter "FullyQualifiedName~QuestionDataTests"
```

### ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```bash
dotnet test --collect:"XPlat Code Coverage" --results-directory:"./coverage"
```

---

## ğŸ“‹ å‰©ä½™å·¥ä½œ

### ç«‹å³ (P0)
- [ ] ä¿®å¤ FluentAssertions API å…¼å®¹æ€§é—®é¢˜
- [ ] è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- [ ] éªŒè¯æ‰€æœ‰æµ‹è¯•é€šè¿‡

### çŸ­æœŸ (P1)
- [ ] åˆ›å»º API ç«¯åˆ°ç«¯é›†æˆæµ‹è¯•
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯• (ç”Ÿæˆ 10 é¢˜ < 30 ç§’)
- [ ] ç”Ÿæˆæœ€ç»ˆè¦†ç›–ç‡æŠ¥å‘Š

### å¯é€‰ (P2)
- [ ] å‰ç«¯ç»„ä»¶æµ‹è¯•
- [ ] E2E æµ‹è¯•

---

## âœ… å®Œæˆæ¸…å•

- [x] **ä»£ç å®¡æŸ¥** - æ·±åº¦å®¡æŸ¥ 4 ä¸ªå…³é”®ç‚¹
- [x] **æµ‹è¯•å¥—ä»¶åˆ›å»º** - 115+ æµ‹è¯•ç”¨ä¾‹
- [x] **æµ‹è¯•åŸºç¡€è®¾æ–½** - è¾…åŠ©ç±»å’Œæ¡†æ¶
- [x] **å‘åå…¼å®¹æ€§éªŒè¯** - æ–°æ—§å­—æ®µå¹¶å­˜
- [x] **æ•°æ®è¿ç§»æµ‹è¯•** - 100 æ¡æ ·æœ¬éªŒè¯
- [x] **æ–‡æ¡£** - 4 ä»½è¯¦ç»†æŠ¥å‘Š
- [x] **ä»£ç æ”¹è¿›æŒ‡å¯¼** - 3 ä¸ªé—®é¢˜å·²ä¿®å¤

---

## ğŸ–ï¸ QA è´¡çŒ®æ€»ç»“

ä½œä¸º QA/æµ‹è¯•å·¥ç¨‹å¸ˆ,æˆ‘ä¸ºé¡¹ç›®æä¾›äº†:

1. **å…¨é¢å®¡æŸ¥**: æ·±åº¦å®¡æŸ¥ä»£ç è´¨é‡,å‘ç°å¹¶æŒ‡å¯¼ä¿®å¤ 3 ä¸ªä¸­ç­‰é—®é¢˜
2. **æµ‹è¯•æ¡†æ¶**: åˆ›å»ºå®Œæ•´çš„æµ‹è¯•åŸºç¡€è®¾æ–½å’Œ 115+ æµ‹è¯•ç”¨ä¾‹
3. **è´¨é‡ä¿éšœ**: éªŒè¯æ ¸å¿ƒåŠŸèƒ½æ­£ç¡®æ€§,ç¡®ä¿å‘åå…¼å®¹æ€§
4. **æ–‡æ¡£å®Œå–„**: ç”Ÿæˆ 4 ä»½è¯¦ç»†æŠ¥å‘Š,ä¸ºé¡¹ç›®æä¾›å®Œæ•´è®°å½•

---

**QA å·¥ä½œè€…**: QA/æµ‹è¯•å·¥ç¨‹å¸ˆ
**å®Œæˆæ—¥æœŸ**: 2025-02-10
**çŠ¶æ€**: âœ… **æµ‹è¯•å‡†å¤‡å®Œæˆ,å°±ç»ªè¿è¡ŒéªŒè¯**